<dmx-serverconnect id="serverconnect1" url="/api/external/credentials/get_credentials"></dmx-serverconnect>
<dmx-data-detail id="data_detail1" dmx-bind:data="serverconnect1.data.api_credentials.data.results" key="referent"></dmx-data-detail>
<!-- Wappler include head-page="layouts/main" is="dmx-app" id="credentials" appConnect="local" jquery_slim_35="local" fontawesome_4="local" bootstrap4="cdn" bootstrap_icons="cdn" components="{dmxBootstrap4TableGenerator:{},dmxBootstrap4Modal:{},dmxDataTraversal:{},dmxMasonry:{},dmxFormatter:{},dmxNotifications:{}}" -->
<dmx-notifications id="notifies1" position="bottom"></dmx-notifications>
<div class="modal pt-5" id="modal1" is="dmx-bs4-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="fa fa-address-card fa-2x"></i>
                </h5>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row" is="dmx-repeat" id="repeat1" dmx-bind:repeat="data_detail1.data.attrs">
                    <div class="col">
                        <p dmx-text="$key.uppercase()" class="font-weight-bold small text-monospace mb-n1"></p>
                        <p dmx-text="$value" class="mb-2 font-italic"></p>
                    </div>
                    <div class="col-break w-100 small mb-n5"></div>

                </div>
            </div>
            <br>
            <div class="modal-footer">
                <form is="dmx-serverconnect-form" id="serverconnectform1" method="post" action="/api/external/credentials/rm_credentials" dmx-generator="bootstrap4" dmx-form-type="horizontal" dmx-populate="data_detail1.data"
                    dmx-on:success="modal1.hide();serverconnect1.load();notifies1.success('Excluido')">
                    <button id="btn1" class="btn btn-sm btn-danger" dmx-on:click="serverconnectform1.submit()"><i class="bi-trash-fill"></i></button>
                    <input type="hidden" name="referent" id="inp_referent" dmx-bind:value="data_detail1.data.referent"><input type="hidden" name="attrs" id="inp_attrs" dmx-bind:value="data_detail1.data.attrs"><input type="hidden" name="schema_id"
                        id="inp_schema_id" dmx-bind:value="data_detail1.data.schema_id"><input type="hidden" name="cred_def_id" id="inp_cred_def_id" dmx-bind:value="data_detail1.data.cred_def_id"><input type="hidden" name="rev_reg_id"
                        id="inp_rev_reg_id" dmx-bind:value="data_detail1.data.rev_reg_id"><input type="hidden" name="cred_rev_id" id="inp_cred_rev_id" dmx-bind:value="data_detail1.data.cred_rev_id"></form>

            </div>
        </div>
    </div>
</div>


<div class="container mt-4 pt-5">





    <h5 class="text-center">Credenciais</h5>
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover table-sm">
            <thead>
                <tr>
                    <th class="text-center font-weight-bold">DID</th>
                    <th class="text-center font-weight-bold">Emissor</th>
                    <th class="text-center font-weight-bold">Estado</th>
                </tr>
            </thead>
            <tbody is="dmx-repeat" dmx-generator="bs4table" dmx-bind:repeat="content.serverconnect1.data.api_credentials.data.results" id="tableRepeat1">
                <tr dmx-on:click="data_detail1.select(referent);modal1.show()">
                    <td dmx-text="referent" class="text-center"></td>
                    <td dmx-text="cred_def_id.split(':')[4].capitalize()" class="text-center"></td>
                    <td dmx-text="'Definir'" class="text-center"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


<meta name="ac:route" content="/credentials">

<body is="dmx-app" id="index">



    <script src="bootstrap/4/js/popper.min.js"></script>
    <script src="bootstrap/4/js/bootstrap.min.js"></script>